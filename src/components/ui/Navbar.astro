---
import { profile } from '@/settings';
import type { ExternalNavItem, InternalNavItem } from '@/data/navigation';
import NavLink from './NavLink.astro';

const { items, externalLinks } = Astro.props as {
  items: InternalNavItem[];
  externalLinks: ExternalNavItem[];
};

const { fullName } = profile;
const hasExternalLinks = externalLinks.length > 0;
const currentPath = Astro.url.pathname;
---

<header
  data-site-header
  class="site-header-edge sticky top-0 z-40 bg-base-100/70 backdrop-blur-xl shadow-[0_10px_30px_color-mix(in_oklab,#000_38%,transparent)]"
>
  <div
    class="mx-auto flex w-full max-w-5xl flex-col gap-4 px-6 py-4 md:flex-row md:items-center md:justify-between"
  >
    <div class="flex items-center justify-between gap-4">
      <NavLink
        item={{ label: fullName, href: '/', kind: 'internal' }}
        currentPath={currentPath}
        class="font-header text-lg tracking-tight text-base-content px-2.5 py-1.5"
      />
    </div>

    <div
      class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between md:gap-6"
    >
      <nav class="flex flex-wrap gap-2" aria-label="Primary">
        {items.map((item) => <NavLink item={item} currentPath={currentPath} />)}
      </nav>

      {
        hasExternalLinks && (
          <div
            class="site-header-external-divider flex flex-wrap items-center gap-2 pt-3 md:pl-4 md:pt-0"
            aria-label="External profiles"
          >
            {externalLinks.map((link) => (
              <NavLink item={link} currentPath={currentPath} />
            ))}
          </div>
        )
      }
    </div>
  </div>
  <div class="site-header-edge-line" data-site-header-edge aria-hidden="true">
  </div>
</header>
